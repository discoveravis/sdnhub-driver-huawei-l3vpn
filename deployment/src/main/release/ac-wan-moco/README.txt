Introduction
============

This guide helps to setup the moco server for AC-WAN Controller to learn
the REST API supported by l3-vpn driver service.

Configuration of the Mocked AC-WAN Controller environment
=========================================================

1. Install the moco standalone server by following the steps given
at https://github.com/dreamhead/moco/blob/master/moco-doc/usage.md#shell

2. Run the moco server using following command to mock the AC-WAN Controller:

   java -jar moco-runner-0.11.0-standalone.jar https -p 18008 -c
   acwancontroller.json -https cert.jks -cert mocohttps --keystore mocohttps

    acwancontroller.json file can be found in sample-api-usage:
    https://gerrit.open-o.org/r/#/c/4093/
    cert.jks can be downloaded from here:
    https://github.com/dreamhead/moco/tree/master/moco-runner/src/test/resources/certificate

    Please note down the shutdown port reported in console when moco server
    started. And use that port to shutdown the server as below:

         moco shutdown -p <shutdown port number>

    Now controller is up. Following is the example to access the api:

    https://<Simulated Conroller IP>:18008/restconf/config/huawei-ac-net-l3vpn:l3vpn-cfg/instances/instance/123
    Method: GET
    HEADER: Content-Type: application/json

    3. Add AC-WAN to ESR service by using below sample json (please refer
    http://wiki.open-o.org , on how to register AC-WAN controller using ESR)

    4. For each REST API supported by l3-vpn driver services, corresponding
    samples request and response details are provided under the folder
       'sample-api-usage'.

Ensure that 'driver.json' file under folder 'generalconfig/driver.json' is
configured with correct IP address for l3-vpn driver. This information will be
used for driver registeration with driver manager.

Tutorial
=========

To test the REST API, either postman or curl command could be used. Before
testing, update the header "X-Driver-Parameter": "extSysID=<Conroller ID
generated by ESR>" and use the JSON body as it is.

Bringup the docker container for MSB, ESR, Driver-Manager and l3-vpn driver
service as per wiki (https://wiki.open-o.org/view/Installation_Instructions).

Bringup the mocked/simuated controller as per the previous section.

For creating l3vpn please refer NBIs from the wiki
(https://wiki.open-o.org/view/SDN-O_L3VPN_SBI_YAML_v1_0_0).
